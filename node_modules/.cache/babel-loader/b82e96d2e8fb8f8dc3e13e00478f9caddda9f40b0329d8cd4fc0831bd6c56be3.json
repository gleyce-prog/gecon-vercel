{"ast":null,"code":"import { api } from '../lib/Axios';\nimport { JWT_TOKEN } from '../config/Globals';\nconst storage = localStorage;\nconst loginApi = (email, senha) => {\n  return api().post('auth/login', {\n    email: email,\n    password: senha\n  }).then(response => {\n    if (response.data.token) {\n      storage.setItem(\"token\", response.data.token);\n    }\n    return !!storage.getItem(\"token\");\n  }).catch(error => {\n    console.error(error);\n    return false;\n  });\n};\nconst getWithExpiration = () => {\n  if (JWT_TOKEN) {\n    const exp = new Date((JWT_TOKEN === null || JWT_TOKEN === void 0 ? void 0 : JWT_TOKEN.exp) * 1000);\n    const now = new Date();\n    if (now > exp) {\n      alert(\"Token expirado!\");\n      setTimeout(() => {\n        storage.removeItem('token');\n      }, 4000);\n    } else return true;\n  } else return false;\n};\nexport { getWithExpiration, loginApi };","map":{"version":3,"names":["api","JWT_TOKEN","storage","localStorage","loginApi","email","senha","post","password","then","response","data","token","setItem","getItem","catch","error","console","getWithExpiration","exp","Date","now","alert","setTimeout","removeItem"],"sources":["/workspaces/gecon-vercel/src/utils/Login.js"],"sourcesContent":["import { api } from '../lib/Axios';\r\nimport { JWT_TOKEN } from '../config/Globals';\r\nconst storage = localStorage;\r\nconst loginApi = (email, senha) => {\r\n    return api().post('auth/login', {\r\n        email: email,\r\n        password: senha\r\n    }).then((response) => {\r\n        if (response.data.token) {\r\n            storage.setItem(\"token\", response.data.token);\r\n        }\r\n        return !!storage.getItem(\"token\"); \r\n    }).catch((error) => {\r\n        console.error(error);\r\n        return false;\r\n    });\r\n}\r\nconst getWithExpiration = () => {\r\n    if (JWT_TOKEN) {\r\n        const exp = new Date(JWT_TOKEN?.exp * 1000);\r\n        const now = new Date();\r\n        if (now > exp) {\r\n            alert(\"Token expirado!\");\r\n            setTimeout(() => {\r\n                storage.removeItem('token');\r\n            }, 4000);\r\n        } else return true;\r\n\r\n    }\r\n    else return false;\r\n};\r\nexport { getWithExpiration, loginApi };"],"mappings":"AAAA,SAASA,GAAG,QAAQ,cAAc;AAClC,SAASC,SAAS,QAAQ,mBAAmB;AAC7C,MAAMC,OAAO,GAAGC,YAAY;AAC5B,MAAMC,QAAQ,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;EAC/B,OAAON,GAAG,CAAC,CAAC,CAACO,IAAI,CAAC,YAAY,EAAE;IAC5BF,KAAK,EAAEA,KAAK;IACZG,QAAQ,EAAEF;EACd,CAAC,CAAC,CAACG,IAAI,CAAEC,QAAQ,IAAK;IAClB,IAAIA,QAAQ,CAACC,IAAI,CAACC,KAAK,EAAE;MACrBV,OAAO,CAACW,OAAO,CAAC,OAAO,EAAEH,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC;IACjD;IACA,OAAO,CAAC,CAACV,OAAO,CAACY,OAAO,CAAC,OAAO,CAAC;EACrC,CAAC,CAAC,CAACC,KAAK,CAAEC,KAAK,IAAK;IAChBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACpB,OAAO,KAAK;EAChB,CAAC,CAAC;AACN,CAAC;AACD,MAAME,iBAAiB,GAAGA,CAAA,KAAM;EAC5B,IAAIjB,SAAS,EAAE;IACX,MAAMkB,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAAnB,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEkB,GAAG,IAAG,IAAI,CAAC;IAC3C,MAAME,GAAG,GAAG,IAAID,IAAI,CAAC,CAAC;IACtB,IAAIC,GAAG,GAAGF,GAAG,EAAE;MACXG,KAAK,CAAC,iBAAiB,CAAC;MACxBC,UAAU,CAAC,MAAM;QACbrB,OAAO,CAACsB,UAAU,CAAC,OAAO,CAAC;MAC/B,CAAC,EAAE,IAAI,CAAC;IACZ,CAAC,MAAM,OAAO,IAAI;EAEtB,CAAC,MACI,OAAO,KAAK;AACrB,CAAC;AACD,SAASN,iBAAiB,EAAEd,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}