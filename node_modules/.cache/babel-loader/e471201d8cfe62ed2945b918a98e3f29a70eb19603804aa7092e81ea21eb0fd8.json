{"ast":null,"code":"import React from'react';import{useRoutes,Navigate,useLocation}from'react-router-dom';import{routes}from'./Rotas.js';import{MODULOS}from'./Globals.js';import{getWithExpiration}from'../utils/Login.js';import{jsx as _jsx}from\"react/jsx-runtime\";const isLogged=getWithExpiration();const getModule=function(){let key=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return MODULOS.filter(modulo=>modulo&&(modulo===null||modulo===void 0?void 0:modulo.ativo)===true).map(modulo=>modulo.id).includes(key);};const RoutesProtected=()=>{const element=useRoutes(routes);const location=useLocation();const currentRoute=getCurrentRoute(routes,location.pathname);if(location.pathname===\"/\")return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});else if(!element||!currentRoute)return/*#__PURE__*/_jsx(Navigate,{to:\"/pagina-nao-encontrada\"});return hasAccess(currentRoute)?element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});};const getCurrentRoute=(routes,currentPath)=>{return routes.find(route=>route.path===currentPath);};const hasAccess=currentRoute=>{return currentRoute.type===\"public\"||isLogged&&(currentRoute.type===\"logged\"||Permission(currentRoute.key));};const Permission=key=>{var _routes$find;return typeof key==='number'?getModule(key):getModule((_routes$find=routes.find(route=>route.path===key))===null||_routes$find===void 0?void 0:_routes$find.key);};export{RoutesProtected,Permission};","map":{"version":3,"names":["React","useRoutes","Navigate","useLocation","routes","MODULOS","getWithExpiration","jsx","_jsx","isLogged","getModule","key","arguments","length","undefined","filter","modulo","ativo","map","id","includes","RoutesProtected","element","location","currentRoute","getCurrentRoute","pathname","to","hasAccess","currentPath","find","route","path","type","Permission","_routes$find"],"sources":["/workspaces/gecon-vercel/src/config/Rotas_protegidas.js"],"sourcesContent":["import React from 'react';\r\nimport { useRoutes, Navigate, useLocation  } from 'react-router-dom';\r\nimport { routes } from './Rotas.js';\r\nimport { MODULOS } from './Globals.js';\r\nimport { getWithExpiration } from '../utils/Login.js';\r\n\r\nconst isLogged = getWithExpiration();\r\n\r\nconst getModule = (key = null) => {\r\n    return MODULOS.filter((modulo) => modulo && modulo?.ativo === true).map((modulo) => modulo.id).includes(key);\r\n}\r\n\r\n\r\nconst RoutesProtected = () => {\r\n    const element = useRoutes(routes);\r\n    const location = useLocation();  \r\n    const currentRoute = getCurrentRoute(routes, location.pathname);  \r\n    if (location.pathname === \"/\" ) \r\n        return <Navigate to=\"/login\" />;  \r\n    else if (!element || !currentRoute)\r\n        return <Navigate to=\"/pagina-nao-encontrada\" />;\r\n\r\n    return hasAccess(currentRoute) ? element : <Navigate to=\"/login\" />;\r\n};\r\n\r\n\r\nconst getCurrentRoute = (routes, currentPath) => {\r\n    return routes.find((route) => route.path === currentPath);\r\n};\r\n\r\nconst hasAccess = (currentRoute) => {\r\n    return currentRoute.type === \"public\" || (isLogged && (currentRoute.type === \"logged\" || Permission(currentRoute.key)));\r\n}\r\nconst Permission = (key) => {\r\n    return typeof key === 'number' ? getModule(key) : getModule(routes.find(route => route.path === key)?.key);\r\n};\r\n\r\nexport { RoutesProtected, Permission };\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,QAAQ,CAAEC,WAAW,KAAS,kBAAkB,CACpE,OAASC,MAAM,KAAQ,YAAY,CACnC,OAASC,OAAO,KAAQ,cAAc,CACtC,OAASC,iBAAiB,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEtD,KAAM,CAAAC,QAAQ,CAAGH,iBAAiB,CAAC,CAAC,CAEpC,KAAM,CAAAI,SAAS,CAAG,QAAAA,CAAA,CAAgB,IAAf,CAAAC,GAAG,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CACzB,MAAO,CAAAP,OAAO,CAACU,MAAM,CAAEC,MAAM,EAAKA,MAAM,EAAI,CAAAA,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEC,KAAK,IAAK,IAAI,CAAC,CAACC,GAAG,CAAEF,MAAM,EAAKA,MAAM,CAACG,EAAE,CAAC,CAACC,QAAQ,CAACT,GAAG,CAAC,CAChH,CAAC,CAGD,KAAM,CAAAU,eAAe,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAAC,OAAO,CAAGrB,SAAS,CAACG,MAAM,CAAC,CACjC,KAAM,CAAAmB,QAAQ,CAAGpB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAqB,YAAY,CAAGC,eAAe,CAACrB,MAAM,CAAEmB,QAAQ,CAACG,QAAQ,CAAC,CAC/D,GAAIH,QAAQ,CAACG,QAAQ,GAAK,GAAG,CACzB,mBAAOlB,IAAA,CAACN,QAAQ,EAACyB,EAAE,CAAC,QAAQ,CAAE,CAAC,CAAC,IAC/B,IAAI,CAACL,OAAO,EAAI,CAACE,YAAY,CAC9B,mBAAOhB,IAAA,CAACN,QAAQ,EAACyB,EAAE,CAAC,wBAAwB,CAAE,CAAC,CAEnD,MAAO,CAAAC,SAAS,CAACJ,YAAY,CAAC,CAAGF,OAAO,cAAGd,IAAA,CAACN,QAAQ,EAACyB,EAAE,CAAC,QAAQ,CAAE,CAAC,CACvE,CAAC,CAGD,KAAM,CAAAF,eAAe,CAAGA,CAACrB,MAAM,CAAEyB,WAAW,GAAK,CAC7C,MAAO,CAAAzB,MAAM,CAAC0B,IAAI,CAAEC,KAAK,EAAKA,KAAK,CAACC,IAAI,GAAKH,WAAW,CAAC,CAC7D,CAAC,CAED,KAAM,CAAAD,SAAS,CAAIJ,YAAY,EAAK,CAChC,MAAO,CAAAA,YAAY,CAACS,IAAI,GAAK,QAAQ,EAAKxB,QAAQ,GAAKe,YAAY,CAACS,IAAI,GAAK,QAAQ,EAAIC,UAAU,CAACV,YAAY,CAACb,GAAG,CAAC,CAAE,CAC3H,CAAC,CACD,KAAM,CAAAuB,UAAU,CAAIvB,GAAG,EAAK,KAAAwB,YAAA,CACxB,MAAO,OAAO,CAAAxB,GAAG,GAAK,QAAQ,CAAGD,SAAS,CAACC,GAAG,CAAC,CAAGD,SAAS,EAAAyB,YAAA,CAAC/B,MAAM,CAAC0B,IAAI,CAACC,KAAK,EAAIA,KAAK,CAACC,IAAI,GAAKrB,GAAG,CAAC,UAAAwB,YAAA,iBAAxCA,YAAA,CAA0CxB,GAAG,CAAC,CAC9G,CAAC,CAED,OAASU,eAAe,CAAEa,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}