{"ast":null,"code":"import{api}from'../lib/Axios';import{JWT_TOKEN}from'../config/Globals';const storage=localStorage;const loginApi=(email,senha)=>{return api().post('auth/login',{email:email,password:senha}).then(response=>{if(response.data.token){storage.setItem(\"token\",response.data.token);}return!!storage.getItem(\"token\");}).catch(error=>{console.error(error);return false;});};const getWithExpiration=()=>{if(JWT_TOKEN){const exp=new Date((JWT_TOKEN===null||JWT_TOKEN===void 0?void 0:JWT_TOKEN.exp)*1000);const now=new Date();if(now>exp){alert(\"Token expirado!\");setTimeout(()=>{storage.removeItem('token');},4000);}else return true;}else return false;};export{getWithExpiration,loginApi};","map":{"version":3,"names":["api","JWT_TOKEN","storage","localStorage","loginApi","email","senha","post","password","then","response","data","token","setItem","getItem","catch","error","console","getWithExpiration","exp","Date","now","alert","setTimeout","removeItem"],"sources":["/workspaces/gecon-vercel/src/utils/Login.js"],"sourcesContent":["import { api } from '../lib/Axios';\r\nimport { JWT_TOKEN } from '../config/Globals';\r\nconst storage = localStorage;\r\nconst loginApi = (email, senha) => {\r\n    return api().post('auth/login', {\r\n        email: email,\r\n        password: senha\r\n    }).then((response) => {\r\n        if (response.data.token) {\r\n            storage.setItem(\"token\", response.data.token);\r\n        }\r\n        return !!storage.getItem(\"token\"); \r\n    }).catch((error) => {\r\n        console.error(error);\r\n        return false;\r\n    });\r\n}\r\nconst getWithExpiration = () => {\r\n    if (JWT_TOKEN) {\r\n        const exp = new Date(JWT_TOKEN?.exp * 1000);\r\n        const now = new Date();\r\n        if (now > exp) {\r\n            alert(\"Token expirado!\");\r\n            setTimeout(() => {\r\n                storage.removeItem('token');\r\n            }, 4000);\r\n        } else return true;\r\n\r\n    }\r\n    else return false;\r\n};\r\nexport { getWithExpiration, loginApi };"],"mappings":"AAAA,OAASA,GAAG,KAAQ,cAAc,CAClC,OAASC,SAAS,KAAQ,mBAAmB,CAC7C,KAAM,CAAAC,OAAO,CAAGC,YAAY,CAC5B,KAAM,CAAAC,QAAQ,CAAGA,CAACC,KAAK,CAAEC,KAAK,GAAK,CAC/B,MAAO,CAAAN,GAAG,CAAC,CAAC,CAACO,IAAI,CAAC,YAAY,CAAE,CAC5BF,KAAK,CAAEA,KAAK,CACZG,QAAQ,CAAEF,KACd,CAAC,CAAC,CAACG,IAAI,CAAEC,QAAQ,EAAK,CAClB,GAAIA,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAE,CACrBV,OAAO,CAACW,OAAO,CAAC,OAAO,CAAEH,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,CACjD,CACA,MAAO,CAAC,CAACV,OAAO,CAACY,OAAO,CAAC,OAAO,CAAC,CACrC,CAAC,CAAC,CAACC,KAAK,CAAEC,KAAK,EAAK,CAChBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACpB,MAAO,MAAK,CAChB,CAAC,CAAC,CACN,CAAC,CACD,KAAM,CAAAE,iBAAiB,CAAGA,CAAA,GAAM,CAC5B,GAAIjB,SAAS,CAAE,CACX,KAAM,CAAAkB,GAAG,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAAnB,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEkB,GAAG,EAAG,IAAI,CAAC,CAC3C,KAAM,CAAAE,GAAG,CAAG,GAAI,CAAAD,IAAI,CAAC,CAAC,CACtB,GAAIC,GAAG,CAAGF,GAAG,CAAE,CACXG,KAAK,CAAC,iBAAiB,CAAC,CACxBC,UAAU,CAAC,IAAM,CACbrB,OAAO,CAACsB,UAAU,CAAC,OAAO,CAAC,CAC/B,CAAC,CAAE,IAAI,CAAC,CACZ,CAAC,IAAM,OAAO,KAAI,CAEtB,CAAC,IACI,OAAO,MAAK,CACrB,CAAC,CACD,OAASN,iBAAiB,CAAEd,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}